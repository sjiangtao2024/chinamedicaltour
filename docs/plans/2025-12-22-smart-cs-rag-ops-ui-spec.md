# 智能客服 RAG 运维上传界面说明

## 目标
为内部人员提供一个最小可用后台：登录后编辑知识库内容，自动转换为 Markdown 并上传到 R2，触发向量重建。

## 页面结构
- 登录页
- 编辑页
- 状态提示区

## 登录页
- 输入项:
  - `Admin Token`（单行输入，密码样式）
- 按钮:
  - `Login`
- 行为:
  - 点击 Login 后调用 `/api/auth` 校验。
  - 成功进入编辑页；失败提示 “Token 无效”。

## 编辑页
- 顶部区:
  - 当前版本信息（最后更新时间、最后操作者备注）
  - `Save` 按钮（保存并上传）
- 主体编辑区:
  - 富文本编辑器或 textarea（以 HTML 为编辑体验）
  - `Preview` 预览区（Markdown 渲染）
- 附加字段:
  - `Update Note`（可选，用于审计记录）

## 核心交互
1. 用户编辑内容（HTML）。
2. 点击 `Save` 时前端转换为 Markdown。
3. 调用 `/api/knowledge` 上传 Markdown。
4. 上传成功后展示 “已更新，正在重建向量”。
5. 可选轮询 `/api/status` 展示重建进度。

## 提示与错误
- Token 失效: “登录已过期，请重新登录”。
- 上传失败: “上传失败，请重试”。
- 重建失败: “向量重建失败，已保留旧版本”。

## 权限与安全
- 所有写接口必须携带 token。
- token 不存储在本地持久化，仅保留在内存。
- 支持一键退出（清除 token）。

## 可用性细节
- 编辑内容自动保存草稿（localStorage）。
- 刷新页面可恢复草稿。
- 上传成功后清空草稿缓存。

## 视觉与布局建议
- 简洁后台风格，单列布局。
- 主编辑区宽 800-1000px，便于阅读。
- 按钮状态明确（loading、success、error）。

## 兼容性
- 支持桌面端优先，移动端保证可用。
- 仅内部使用，可简化多语言支持。
